<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bem-vindo(a) ao seu Novo CRM!</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Scripts for React & Babel -->
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        /* Custom scrollbar for a cleaner look */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        .step-item.completed {
            background-color: #f0fdf4; /* green-50 */
            border-left-color: #22c55e; /* green-500 */
        }
        .step-item.completed .status-icon {
            color: #22c55e; /* green-500 */
        }
        .step-item.completed .action-button,
        .step-item.completed .skip-button {
             opacity: 0.6;
             pointer-events: none;
        }
        /* Styles for the floating bubble when minimized */
        .onboarding-bubble {
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
        }
        .onboarding-bubble:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body class="bg-slate-100 flex items-center justify-center min-h-screen p-4">
    <!-- This div is a placeholder for the rest of your application -->
    <div class="absolute inset-0 bg-dots-pattern -z-10">
        <div class="p-8">
            <h1 class="text-4xl font-bold text-slate-700">O seu Dashboard Principal</h1>
            <p class="text-slate-500">Aqui ficaria o resto da sua aplicação de CRM...</p>
        </div>
    </div>


    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;
        const e = React.createElement;

        // --- Icon Component ---
        const Icon = ({ name, className }) => {
            const svgProps = {
                xmlns: "http://www.w3.org/2000/svg",
                width: "24",
                height: "24",
                viewBox: "0 0 24 24",
                fill: "none",
                stroke: "currentColor",
                strokeWidth: "2",
                strokeLinecap: "round",
                strokeLinejoin: "round",
                className: className
            };

            switch (name) {
                case 'Rocket': return e('svg', svgProps, e('path', {d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.3.05-3.18-.65-.87-2.2-.86-3.15.05Z"}), e('path', {d:"m12 15-3-3a9 9 0 0 1 3 3Z"}), e('path', {d:"M17.5 14.5c1.5-1.26 2-5 2-5s-3.74.5-5 2c-.71.84-.7 2.3-.05 3.18.65.87 2.2.86 3.15-.05Z"}), e('path', {d:"m21 21-1.5-1.5a9 9 0 0 1-1.5 1.5Z"}), e('path', {d:"M15 12 3 3l3 9 9-3Z"}), e('path', {d:"M9.5 2.5c1.5 1.26 2 5 2 5s-3.74-.5-5 2c-.71.84-.7 2.3-.05 3.18C7.1 13.55 8.65 13.56 9.6 12.6Z"}));
                case 'Settings': return e('svg', svgProps, e('path', {d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l-.15.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}), e('circle', {cx:"12", cy:"12", r:"3"}));
                case 'Mail': return e('svg', svgProps, e('rect', {width:"20", height:"16", x:"2", y:"4", rx:"2"}), e('path', {d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"}));
                case 'CalendarDays': return e('svg', svgProps, e('rect', {width:"18", height:"18", x:"3", y:"4", rx:"2", ry:"2"}), e('line', {x1:"16", x2:"16", y1:"2", y2:"6"}), e('line', {x1:"8", x2:"8", y1:"2", y2:"6"}), e('line', {x1:"3", x2:"21", y1:"10", y2:"10"}), e('path', {d:"M8 14h.01"}), e('path', {d:"M12 14h.01"}), e('path', {d:"M16 14h.01"}), e('path', {d:"M8 18h.01"}), e('path', {d:"M12 18h.01"}), e('path', {d:"M16 18h.01"}));
                case 'Users': return e('svg', svgProps, e('path', {d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}), e('circle', {cx:"9", cy:"7", r:"4"}), e('path', {d:"M22 21v-2a4 4 0 0 0-3-3.87"}), e('path', {d:"M16 3.13a4 4 0 0 1 0 7.75"}));
                case 'MousePointerSquare': return e('svg', svgProps, e('path', {d:"M3 3h18v18H3z"}), e('path', {d:"M14 14l-4.06-1.27a1 1 0 0 1-.58-1.59l1.27-4.06a1 1 0 0 1 1.59-.58l4.06 1.27a1 1 0 0 1 .58 1.59l-1.27 4.06a1 1 0 0 1-1.59.58z"}), e('path', {d:"m11.5 11.5 1 1"}));
                case 'Filter': return e('svg', svgProps, e('polygon', {points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}));
                case 'UserPlus': return e('svg', svgProps, e('path', {d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}), e('circle', {cx:"9", cy:"7", r:"4"}), e('line', {x1:"19", x2:"19", y1:"8", y2:"14"}), e('line', {x1:"22", x2:"16", y1:"11", y2:"11"}));
                case 'ListChecks': return e('svg', svgProps, e('path', {d:"m3 17 2 2 4-4"}), e('path', {d:"m3 7 2 2 4-4"}), e('path', {d:"M13 6h8"}), e('path', {d:"M13 12h8"}), e('path', {d:"M13 18h8"}));
                case 'MessageSquare': return e('svg', svgProps, e('path', {d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}));
                case 'Phone': return e('svg', svgProps, e('path', {d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"}));
                case 'Smartphone': return e('svg', svgProps, e('rect', {width:"14", height:"20", x:"5", y:"2", rx:"2", ry:"2"}), e('path', {d:"M12 18h.01"}));
                case 'FileText': return e('svg', svgProps, e('path', {d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}), e('polyline', {points:"14 2 14 8 20 8"}), e('line', {x1:"16", x2:"8", y1:"13", y2:"13"}), e('line', {x1:"16", x2:"8", y1:"17", y2:"17"}), e('line', {x1:"10", x2:"8", y1:"9", y2:"9"}));
                case 'Bot': return e('svg', svgProps, e('path', {d:"M12 8V4H8"}), e('rect', {width:"16", height:"12", x:"4", y:"8", rx:"2"}), e('path', {d:"M2 14h2"}), e('path', {d:"M20 14h2"}), e('path', {d:"M15 13v2"}), e('path', {d:"M9 13v2"}));
                case 'Workflow': return e('svg', svgProps, e('rect', {width:"8", height:"8", x:"3", y:"3", rx:"2"}), e('path', {d:"M7 11v4a2 2 0 0 0 2 2h4"}), e('rect', {width:"8", height:"8", x:"13", y:"13", rx:"2"}));
                case 'Cpu': return e('svg', svgProps, e('rect', {width:"16", height:"16", x:"4", y:"4", rx:"2"}), e('rect', {width:"6", height:"6", x:"9", y:"9", rx:"1"}), e('path', {d:"M15 2v2"}), e('path', {d:"M15 20v2"}), e('path', {d:"M9 2v2"}), e('path', {d:"M9 20v2"}), e('path', {d:"M2 9h2"}), e('path', {d:"M2 15h2"}), e('path', {d:"M20 9h2"}), e('path', {d:"M20 15h2"}));
                case 'BarChart3': return e('svg', svgProps, e('path', {d:"M3 3v18h18"}), e('path', {d:"M18 17V9"}), e('path', {d:"M13 17V5"}), e('path', {d:"M8 17v-3"}));
                case 'LayoutDashboard': return e('svg', svgProps, e('rect', {width:"7", height:"9", x:"3", y:"3", rx:"1"}), e('rect', {width:"7", height:"5", x:"14", y:"3", rx:"1"}), e('rect', {width:"7", height:"9", x:"14", y:"12", rx:"1"}), e('rect', {width:"7", height:"5", x:"3", y:"16", rx:"1"}));
                case 'CheckCircle2': return e('svg', svgProps, e('path', {d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}), e('path', {d:"m9 12 2 2 4-4"}));
                case 'BookOpen': return e('svg', svgProps, e('path', {d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}), e('path', {d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"}));
                case 'LifeBuoy': return e('svg', svgProps, e('circle', {cx:"12", cy:"12", r:"10"}), e('circle', {cx:"12", cy:"12", r:"4"}), e('line', {x1:"4.93", x2:"9.17", y1:"4.93", y2:"9.17"}), e('line', {x1:"14.83", x2:"19.07", y1:"14.83", y2:"19.07"}), e('line', {x1:"9.17", x2:"4.93", y1:"14.83", y2:"19.07"}), e('line', {x1:"19.07", x2:"14.83", y1:"4.93", y2:"9.17"}));
                case 'CheckCircle': return e('svg', svgProps, e('path', {d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}), e('polyline', {points:"22 4 12 14.01 9 11.01"}));
                case 'Minus': return e('svg', svgProps, e('path', {d:"M5 12h14"}));
                case 'X': return e('svg', svgProps, e('path', {d:"M18 6 6 18"}), e('path', {d:"m6 6 12 12"}));
                default: return e('svg', svgProps, e('circle', {cx:"12", cy:"12", r:"10"}), e('path', {d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}), e('path', {d:"M12 17h.01"}));
            }
        };

        // --- Onboarding App Component ---
        const App = () => {
            const [completedSteps, setCompletedSteps] = useState(new Set());
            const [activeCategory, setActiveCategory] = useState('primeirosPassos');
            const [isMinimized, setIsMinimized] = useState(false);
            const [showOnboarding, setShowOnboarding] = useState(true);

            // --- Data for Onboarding Steps with Links ---
            const onboardingData = {
                primeirosPassos: {
                    title: "Primeiros Passos",
                    icon: "Rocket",
                    description: "Configure os fundamentos da sua conta para começar a usar o CRM.",
                    steps: [
                        { id: 'configEmpresa', icon: 'Settings', title: 'Preencher Configurações da Empresa', description: 'Adicione as informações básicas da sua empresa, como nome, endereço e logo.', link: '/config/empresa' },
                        { id: 'sincEmail', icon: 'Mail', title: 'Sincronizar E-mail', description: 'Conecte sua conta de e-mail para enviar e receber mensagens diretamente do CRM.', link: '/config/email' },
                        { id: 'sincAgenda', icon: 'CalendarDays', title: 'Sincronizar Agenda', description: 'Integre seu calendário para gerenciar reuniões e atividades sem sair da plataforma.', link: '/config/agenda' },
                        { id: 'addUsuarios', icon: 'Users', title: 'Convidar Novos Usuários', description: 'Adicione os membros da sua equipe para que possam colaborar com você. (Se for o caso)', link: '/config/usuarios' },
                    ]
                },
                usoBasico: {
                    title: "Uso Básico",
                    icon: "MousePointerSquare",
                    description: "Aprenda as funcionalidades essenciais para o dia a dia.",
                    steps: [
                        { id: 'criarFunil', icon: 'Filter', title: 'Criar ou Editar seu Funil de Vendas', description: 'Personalize as etapas do seu processo comercial para refletir sua operação.', link: '/app/funil' },
                        { id: 'addProspects', icon: 'UserPlus', title: 'Adicionar Prospects e Importar Planilha', description: 'Comece a popular seu CRM com leads e clientes existentes.', link: '/app/prospects/importar' },
                        { id: 'criarAtividades', icon: 'ListChecks', title: 'Criar Atividades e Tarefas', description: 'Organize seu dia e defina os próximos passos para cada negociação.', link: '/app/atividades' },
                    ]
                },
                canais: {
                    title: "Canais de Comunicação",
                    icon: "MessageSquare",
                    description: "Integre as ferramentas que você usa para falar com seus clientes.",
                    steps: [
                        { id: 'contratarTelefonia', icon: 'Phone', title: 'Contratação da Telefonia', description: 'Ative a integração de telefonia para fazer e receber chamadas pelo CRM.', link: '/integracoes/telefonia' },
                        { id: 'integrarWhatsapp', icon: 'Smartphone', title: 'Integração com WhatsApp', description: 'Conecte o WhatsApp para centralizar as conversas com seus leads.', link: '/integracoes/whatsapp' },
                        { id: 'criarTemplates', icon: 'FileText', title: 'Criar Templates de Mensagens', description: 'Agilize a comunicação criando modelos de e-mail, WhatsApp e LinkedIn.', link: '/app/templates' },
                    ]
                },
                automacao: {
                    title: "Automação e Análise",
                    icon: "Bot",
                    description: "Passe para o próximo nível com automação e relatórios.",
                    steps: [
                        { id: 'criarCadencia', icon: 'Workflow', title: 'Criar Cadência de Prospecção', description: 'Configure sequências de contato automáticas para engajar seus leads.', link: '/automacao/cadencias' },
                        { id: 'configMaquinaLeads', icon: 'Cpu', title: 'Configurar Máquina de Leads', description: 'Defina seu ICP e integre com o Sales Navigator para gerar leads qualificados.', link: '/automacao/maquina-leads' },
                        { id: 'analisarDados', icon: 'BarChart3', title: 'Analisar Relatórios', description: 'Acompanhe suas métricas e o desempenho da sua equipe através dos dashboards.', link: '/app/relatorios' },
                    ]
                }
            };
            
            // --- Handlers ---
            const handleCompleteStep = (stepId) => {
                const newCompletedSteps = new Set(completedSteps);
                if (!newCompletedSteps.has(stepId)) {
                    newCompletedSteps.add(stepId);
                    setCompletedSteps(newCompletedSteps);
                }
            };

            const allSteps = Object.values(onboardingData).flatMap(cat => cat.steps);
            const progress = useMemo(() => (allSteps.length === 0) ? 0 : (completedSteps.size / allSteps.length) * 100, [completedSteps, allSteps.length]);
            const currentCategoryData = onboardingData[activeCategory];
            
            // --- Conditional Rendering Logic ---
            if (!showOnboarding) {
                return null; // The component is hidden completely
            }
            
            if (isMinimized) {
                return e('div', {
                        className: 'onboarding-bubble fixed bottom-8 right-8 flex items-center gap-4 bg-slate-800 text-white p-4 rounded-full shadow-lg cursor-pointer hover:bg-slate-700',
                        onClick: () => setIsMinimized(false)
                    },
                    e('div', {className: 'relative w-10 h-10 flex items-center justify-center'},
                        e('svg', {className: 'absolute inset-0 w-full h-full', viewBox: '0 0 36 36'},
                            e('path', {
                                className: 'text-slate-700',
                                d: 'M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831',
                                fill: 'none',
                                stroke: 'currentColor',
                                strokeWidth: '3'
                            }),
                            e('path', {
                                className: 'text-emerald-500',
                                d: 'M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831',
                                fill: 'none',
                                stroke: 'currentColor',
                                strokeWidth: '3',
                                strokeDasharray: `${progress}, 100`,
                                strokeLinecap: 'round'
                            })
                        ),
                        e(Icon, { name: 'Rocket', className: 'w-5 h-5' })
                    ),
                    e('span', { className: 'font-semibold' }, 'Continuar Onboarding')
                );
            }

            return e('div', { className: 'fixed inset-0 bg-black/30 flex items-center justify-center p-4 z-50' },
                e('div', { className: 'bg-white shadow-2xl rounded-2xl flex flex-col md:flex-row overflow-hidden w-full max-w-6xl h-full max-h-[90vh]' },
                    e('aside', { className: 'w-full md:w-1/4 bg-slate-800 text-white p-6 flex flex-col' },
                        e('h1', { className: 'text-2xl font-bold mb-2 flex items-center gap-2' }, e(Icon, { name: 'LayoutDashboard', className: 'w-7 h-7' }), 'Bem-vindo(a)!'),
                        e('p', { className: 'text-slate-400 text-sm mb-6' }, 'Siga os passos para configurar sua conta.'),
                        e('div', { className: 'w-full bg-slate-700 rounded-full h-2.5 mb-2' }, e('div', { className: 'bg-emerald-500 h-2.5 rounded-full transition-all duration-500', style: { width: `${progress}%` }})),
                        e('p', { className: 'text-sm text-slate-300 mb-8' }, `${Math.round(progress)}% Concluído`),
                        e('nav', { className: 'flex flex-col space-y-2' },
                            Object.entries(onboardingData).map(([key, category]) => {
                                const isActive = activeCategory === key;
                                const isCategoryCompleted = category.steps.every(s => completedSteps.has(s.id));
                                return e('button', { key: key, onClick: () => setActiveCategory(key), className: `flex items-center gap-3 p-3 rounded-lg text-left transition-colors duration-200 ${isActive ? 'bg-slate-700' : 'hover:bg-slate-700/50'}`},
                                    e('div', {className: 'relative'}, 
                                        e(Icon, { name: category.icon, className: 'w-5 h-5 text-slate-300'}),
                                        isCategoryCompleted && e(Icon, {name: 'CheckCircle2', className: 'w-4 h-4 text-emerald-400 bg-slate-800 rounded-full absolute -bottom-1 -right-1'})
                                    ),
                                    e('span', {className: 'flex-1'}, category.title)
                                );
                            })
                        ),
                        e('div', { className: 'mt-auto' }, 
                            e('a', { href: '#', className: 'flex items-center gap-3 p-3 rounded-lg text-left transition-colors duration-200 text-slate-300 hover:bg-slate-700/50 hover:text-white' }, e(Icon, { name: 'BookOpen', className: 'w-5 h-5'}), 'Documentação'),
                            e('a', { href: '#', className: 'flex items-center gap-3 p-3 rounded-lg text-left transition-colors duration-200 text-slate-300 hover:bg-slate-700/50 hover:text-white' }, e(Icon, { name: 'LifeBuoy', className: 'w-5 h-5'}), 'Ajuda e Suporte')
                        )
                    ),
                    e('main', { className: 'w-full md:w-3/4 p-8 lg:p-12 overflow-y-auto custom-scrollbar relative' },
                        e('div', { className: 'absolute top-4 right-4 flex gap-2' },
                            e('button', { 
                                onClick: () => setIsMinimized(true),
                                className: 'p-2 text-slate-500 hover:bg-slate-100 rounded-full'
                            }, e(Icon, { name: 'Minus', className: 'w-5 h-5' })),
                             e('button', { 
                                onClick: () => setShowOnboarding(false),
                                className: 'p-2 text-slate-500 hover:bg-slate-100 rounded-full'
                            }, e(Icon, { name: 'X', className: 'w-5 h-5' }))
                        ),
                        e('header', {className: 'mb-8'}, e('h2', { className: 'text-3xl font-bold text-slate-800' }, currentCategoryData.title), e('p', { className: 'text-slate-500 mt-1' }, currentCategoryData.description)),
                        e('div', { className: 'space-y-4' },
                            currentCategoryData.steps.map(step => {
                                const isCompleted = completedSteps.has(step.id);
                                return e('div', { key: step.id, className: `step-item flex flex-col md:flex-row items-center gap-6 p-6 bg-white border-l-4 transition-all duration-300 rounded-lg shadow-sm hover:shadow-md ${isCompleted ? 'completed border-emerald-500' : 'border-slate-300'}`},
                                    e('div', {className: 'status-icon text-slate-400 transition-colors duration-300'}, isCompleted ? e(Icon, {name: 'CheckCircle', className: 'w-8 h-8'}) : e(Icon, {name: step.icon, className: 'w-8 h-8'})),
                                    e('div', { className: 'flex-1 text-center md:text-left' }, e('h3', { className: 'text-lg font-semibold text-slate-800' }, step.title), e('p', { className: 'text-slate-600 text-sm' }, step.description)),
                                    e('div', { className: 'flex items-center gap-x-4 ml-auto' },
                                        activeCategory === 'canais' && !isCompleted && e('button', {
                                            onClick: () => handleCompleteStep(step.id),
                                            className: 'skip-button text-sm font-semibold text-slate-500 hover:text-slate-800 transition-colors'
                                        }, 'Não usar'),
                                        isCompleted ?
                                            e('span', { className: 'px-6 py-2 rounded-full font-semibold text-sm bg-emerald-500 text-white' }, 'Concluído') :
                                            e('a', {
                                                href: step.link,
                                                onClick: (evt) => {
                                                    handleCompleteStep(step.id);
                                                },
                                                className: 'action-button whitespace-nowrap px-6 py-2 rounded-full font-semibold text-sm transition-all duration-300 bg-slate-800 text-white hover:bg-slate-700'
                                            }, 'Configurar')
                                    )
                                );
                            })
                        )
                    )
                )
            );
        };
        
        ReactDOM.render(e(App), document.getElementById('root'));
    </script>
</body>
</html>

